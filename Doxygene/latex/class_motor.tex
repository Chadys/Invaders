\hypertarget{class_motor}{\section{Référence de la classe Motor}
\label{class_motor}\index{Motor@{Motor}}
}
\subsection*{Fonctions membres publiques}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_motor_a6ae139ee985ef74ec9704b895f3b8895}{start} ()
\begin{DoxyCompactList}\small\item\em Methode de lancement de la Game\-Loop. \end{DoxyCompactList}\item 
void \hyperlink{class_motor_a9a5d81ced7a0f9d679732839a8f77d3a}{stop} ()
\begin{DoxyCompactList}\small\item\em Methode d'arrêt de la Game\-Loop. \end{DoxyCompactList}\item 
\hyperlink{class_motor_ac2cb95916f7081fef0b4582db086404e}{Motor} (Graphics\-Context gc, Array\-List$<$ Key\-Code $>$ keys)
\begin{DoxyCompactList}\small\item\em Constructeur d'un moteur. \end{DoxyCompactList}\item 
void \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed} (float timestep, Array\-List$<$ Key\-Code $>$ keys)
\begin{DoxyCompactList}\small\item\em Methode s'occupant des déplacements et changement d'état à partir des données du jeu. \end{DoxyCompactList}\item 
void \hyperlink{class_motor_a73f2becef3f9ceb3a54b9698e8ef7d05}{render} (Graphics\-Context gc)
\begin{DoxyCompactList}\small\item\em Methode d'affichage de tout les objets du jeu. \end{DoxyCompactList}\item 
Array\-List$<$ \hyperlink{class_tir}{Tir} $>$ \hyperlink{class_motor_ab31da9ce3d509a33029d6025f3596604}{get\-Tirs} ()
\begin{DoxyCompactList}\small\item\em Méthode renvoyant la liste des missiles affichés. \end{DoxyCompactList}\item 
Array\-List$<$ \hyperlink{class_house}{House} $>$ \hyperlink{class_motor_af1d6924fafe1e9d2ce3c77799c35a136}{get\-Houses} ()
\begin{DoxyCompactList}\small\item\em Méthode renvoyant la liste des maisons. \end{DoxyCompactList}\item 
Array\-List$<$ \hyperlink{class_alien}{Alien} $>$ \hyperlink{class_motor_a787633e0544ca8c8dceb3f415b7aeeea}{get\-Aliens} ()
\begin{DoxyCompactList}\small\item\em Méthode renvoyant la liste des aliens affichés. \end{DoxyCompactList}\item 
Array\-List$<$ \hyperlink{class_bonus}{Bonus} $>$ \hyperlink{class_motor_a42d5acc1b6be21bade008a427bef9c64}{get\-Bonus} ()
\begin{DoxyCompactList}\small\item\em Méthode renvoyant la liste des bonus affichés. \end{DoxyCompactList}\item 
Array\-List$<$ \hyperlink{class_bonus}{Bonus} $>$ \hyperlink{class_motor_a33b87f33f275b9f87ed7791857af2cf3}{get\-Active\-Bonus} ()
\begin{DoxyCompactList}\small\item\em Méthode renvoyant la liste des bonus actifs actuellement. \end{DoxyCompactList}\item 
\hyperlink{class_player}{Player} \hyperlink{class_motor_a054f1e6ac323e78270bcb2ed9687fb80}{get\-Player} ()
\begin{DoxyCompactList}\small\item\em Methode renvoyant l'objet joueur. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Fonctions membres publiques statiques}
\begin{DoxyCompactItemize}
\item 
static Pair$<$ Integer, Integer $>$ \hyperlink{class_motor_a810690068c5edddd73d584e0dd19acd4}{collide} (int x1, int y1, Image img1, int x2, int y2, Image img2)
\begin{DoxyCompactList}\small\item\em Methode générale de detection de collision entre deux objets. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Description détaillée}


Définition à la ligne 20 du fichier Motor.\-java.



\subsection{Documentation des constructeurs et destructeur}
\hypertarget{class_motor_ac2cb95916f7081fef0b4582db086404e}{\index{Motor@{Motor}!Motor@{Motor}}
\index{Motor@{Motor}!Motor@{Motor}}
\subsubsection[{Motor}]{\setlength{\rightskip}{0pt plus 5cm}Motor.\-Motor (
\begin{DoxyParamCaption}
\item[{Graphics\-Context}]{gc, }
\item[{Array\-List$<$ Key\-Code $>$}]{keys}
\end{DoxyParamCaption}
)}}\label{class_motor_ac2cb95916f7081fef0b4582db086404e}


Constructeur d'un moteur. 

Le moteur d'un jeu est la partie qui s'occupe de simuler en temps réel les caractéristiques que l'on veut attribuer aux élements du jeu ainsi que les lois physiques qui le compose. Initialise les chronomètre à 0.\-0, initialise le temps qui se passera entre deux \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()} et donne l'index de l'image de la prochaine ligne d'alien qui sera dessiné.

Initialise tous les objets dynamiques du jeu avec leur propre méthode de classe (ou une liste vide dans le cas des objets qui ne sont pas encore présents soit les missiles et les bonus).

Initialise la boucle principale du jeu

Une boucle de jeu sert à gérer la fréquence d'affichage et de calcul du jeu. Ici la game loop est à temps \char`\"{}fixe\char`\"{}, ce qui veut dire que si le jeu ralentis, le moteur du jeu ne dois pas prendre en compte ce ralentissements. Par exemple, si un objet doit se déplacer à vitesse constante, il ralentira si la fréquence d'affichage diminue. A l'inverse, il existe des boucles de jeu qui permettent au moteur de s'adapter à la fréquence d'affichage. Source \-: \href{http://svanimpe.be/blog/game-loops-fx.html}{\tt http\-://svanimpe.\-be/blog/game-\/loops-\/fx.\-html}

Méthode appellée le plus souvent possible, au maximum 60 fois par secondes

S'il s'agit de la première frame, on règle le temps précédent pour ne pas créer un grand écart entre deux frames

L'espace entre deux frame en secondes

Actualisation du temps accumulé

Actualisation du moment de la frame précédante

Joue le rôle de régulateur, permet de ne pas afficher le jeu si la fréquence d'affichage est trop élevée. Ainsi, le temps restant servira au calculs du moteur (\hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()})

Override de la méthode stop pour ne pas dérégler la gameloop

Définition à la ligne 67 du fichier Motor.\-java.



Voici le graphe d'appel pour cette fonction \-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_motor_ac2cb95916f7081fef0b4582db086404e_cgraph}
\end{center}
\end{figure}




\subsection{Documentation des fonctions membres}
\hypertarget{class_motor_a810690068c5edddd73d584e0dd19acd4}{\index{Motor@{Motor}!collide@{collide}}
\index{collide@{collide}!Motor@{Motor}}
\subsubsection[{collide}]{\setlength{\rightskip}{0pt plus 5cm}static Pair$<$Integer,Integer$>$ Motor.\-collide (
\begin{DoxyParamCaption}
\item[{int}]{x1, }
\item[{int}]{y1, }
\item[{Image}]{img1, }
\item[{int}]{x2, }
\item[{int}]{y2, }
\item[{Image}]{img2}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_motor_a810690068c5edddd73d584e0dd19acd4}


Methode générale de detection de collision entre deux objets. 

Le but est de considérer une collision comme une zone commune à deux entités. La zone est parcourue une fois et les pixels des deux entités contenus dans cette zone sont comparés. Si les deux pixels des deux entités ne sont pas transparant, alors il y une collision entre les deux entités 
\begin{DoxyItemize}
\item Test de collision simple \-: on regarde si les zones des deux entités se chevauchent
\item Calcul des coordonnées absolues de la zone d'intersection
\item Chargement des pixels des deux images comparées
\item Lecture en y de la zone d'intersection
\item Lecture en x de la zone d'intersection
\item Récupération du pixel relatif à la première image
\item Récupération du pixel relatif à la deuxième image
\item Collision détectée \-: on renvoit la position absolue de la collision 
\end{DoxyItemize}

Définition à la ligne 298 du fichier Motor.\-java.



Voici le graphe des appelants de cette fonction \-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_motor_a810690068c5edddd73d584e0dd19acd4_icgraph}
\end{center}
\end{figure}


\hypertarget{class_motor_a33b87f33f275b9f87ed7791857af2cf3}{\index{Motor@{Motor}!get\-Active\-Bonus@{get\-Active\-Bonus}}
\index{get\-Active\-Bonus@{get\-Active\-Bonus}!Motor@{Motor}}
\subsubsection[{get\-Active\-Bonus}]{\setlength{\rightskip}{0pt plus 5cm}Array\-List$<${\bf Bonus}$>$ Motor.\-get\-Active\-Bonus (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_motor_a33b87f33f275b9f87ed7791857af2cf3}


Méthode renvoyant la liste des bonus actifs actuellement. 



Définition à la ligne 401 du fichier Motor.\-java.

\hypertarget{class_motor_a787633e0544ca8c8dceb3f415b7aeeea}{\index{Motor@{Motor}!get\-Aliens@{get\-Aliens}}
\index{get\-Aliens@{get\-Aliens}!Motor@{Motor}}
\subsubsection[{get\-Aliens}]{\setlength{\rightskip}{0pt plus 5cm}Array\-List$<${\bf Alien}$>$ Motor.\-get\-Aliens (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_motor_a787633e0544ca8c8dceb3f415b7aeeea}


Méthode renvoyant la liste des aliens affichés. 



Définition à la ligne 389 du fichier Motor.\-java.

\hypertarget{class_motor_a42d5acc1b6be21bade008a427bef9c64}{\index{Motor@{Motor}!get\-Bonus@{get\-Bonus}}
\index{get\-Bonus@{get\-Bonus}!Motor@{Motor}}
\subsubsection[{get\-Bonus}]{\setlength{\rightskip}{0pt plus 5cm}Array\-List$<${\bf Bonus}$>$ Motor.\-get\-Bonus (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_motor_a42d5acc1b6be21bade008a427bef9c64}


Méthode renvoyant la liste des bonus affichés. 



Définition à la ligne 395 du fichier Motor.\-java.

\hypertarget{class_motor_af1d6924fafe1e9d2ce3c77799c35a136}{\index{Motor@{Motor}!get\-Houses@{get\-Houses}}
\index{get\-Houses@{get\-Houses}!Motor@{Motor}}
\subsubsection[{get\-Houses}]{\setlength{\rightskip}{0pt plus 5cm}Array\-List$<${\bf House}$>$ Motor.\-get\-Houses (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_motor_af1d6924fafe1e9d2ce3c77799c35a136}


Méthode renvoyant la liste des maisons. 



Définition à la ligne 383 du fichier Motor.\-java.

\hypertarget{class_motor_a054f1e6ac323e78270bcb2ed9687fb80}{\index{Motor@{Motor}!get\-Player@{get\-Player}}
\index{get\-Player@{get\-Player}!Motor@{Motor}}
\subsubsection[{get\-Player}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Player} Motor.\-get\-Player (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_motor_a054f1e6ac323e78270bcb2ed9687fb80}


Methode renvoyant l'objet joueur. 



Définition à la ligne 407 du fichier Motor.\-java.

\hypertarget{class_motor_ab31da9ce3d509a33029d6025f3596604}{\index{Motor@{Motor}!get\-Tirs@{get\-Tirs}}
\index{get\-Tirs@{get\-Tirs}!Motor@{Motor}}
\subsubsection[{get\-Tirs}]{\setlength{\rightskip}{0pt plus 5cm}Array\-List$<${\bf Tir}$>$ Motor.\-get\-Tirs (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_motor_ab31da9ce3d509a33029d6025f3596604}


Méthode renvoyant la liste des missiles affichés. 



Définition à la ligne 377 du fichier Motor.\-java.

\hypertarget{class_motor_a5333ff4fde112f55953849964f8ae7fa}{\index{Motor@{Motor}!proceed@{proceed}}
\index{proceed@{proceed}!Motor@{Motor}}
\subsubsection[{proceed}]{\setlength{\rightskip}{0pt plus 5cm}void Motor.\-proceed (
\begin{DoxyParamCaption}
\item[{float}]{timestep, }
\item[{Array\-List$<$ Key\-Code $>$}]{keys}
\end{DoxyParamCaption}
)}}\label{class_motor_a5333ff4fde112f55953849964f8ae7fa}


Methode s'occupant des déplacements et changement d'état à partir des données du jeu. 

Méthode la plus importante du jeu \-: c'est elle qui s'occupe du déroulement général du jeu. Elle est appellée par la gameloop. Elle parcourt tous les éléments du jeu et s'occupe de les faire intéragir. Une méthode \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()} d'une classe peut se traduire par \char`\"{}c'est à moi de jouer, comment dois-\/je jouer ?\char`\"{}. La méthode proceed du moteur de jeu ne s'occupe pas de bouger directement les entitées, elle appelle la méthode proceed de chacune des ses entitées. Itérateus permettants de supprimer un élément d'une liste que l'on est en train de parcourir


\begin{DoxyItemize}
\item Ordonnée du dernier alien ajouté au jeu, qui sera forcément dans la ligne la plus haute
\end{DoxyItemize}

Incrémente le temps écoulé au chronomètre \char`\"{}level\-\_\-up\-\_\-time\char`\"{}. Si le chronomètre a dépassé les trente secondes, il se remet à zéro et le niveau affiché augmente de un.


\begin{DoxyItemize}
\item Met à zéro le vecteur déplacement du joueur
\item Si la flèche de gauche du clavier a été pressé depuis le dernier \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()}, décrémente de deux le vecteur de déplacement du joueur
\item Si la flèche de droite du clavier a été pressé depuis le dernier \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()}, incrémente de deux le vecteur de déplacement du joueur
\item Si la touche espace du clavier a été pressé depuis le dernier \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()}, appelle la méthode shoot() du joueur
\item Si la touche \char`\"{}\-P\char`\"{} du clavier a été pressé depuis le dernier \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()}, change l'écran de jeu par celui de pause
\end{DoxyItemize}

Appelle le procced() du joueur avec le temps écoulé depuis le dernier

Pour chaque missile, appelle son \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()} et, si son indicateur de destruction s'est mis à 1, l'enlève de la liste

Appelle le \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()} de toute la classe \hyperlink{class_alien}{Alien} avec le temps écoulé depuis le dernier

Pour chaque alien, appelle son propre \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()} Appelle la fonction \hyperlink{class_motor_a810690068c5edddd73d584e0dd19acd4}{collide()} de l'alien avec le joueur, si elle renvoie vrai, retire toutes les vies du joueur et déclanche l'écran gameover. Si l'indicateur de destruction de l'alien est à 1, le retire de la liste.


\begin{DoxyItemize}
\item Met à jour l'ordonnée de l'alien le plus haut avec les nouvelles positions des aliens qui viennent de se déplacer (à nouveau, le dernier alien ajouté dans la liste sera forcément dans la ligne la plus haute).
\end{DoxyItemize}

À chaque fois que cet ordonné dépasse 0.\-0, ajoute une nouvelle ligne d'alien 50 pixels plus haut. Les 50 représente l'écart qu'il y a entre chaque ligne d'alien. Le fait qu'une nouvelle ligne d'alien soit ajoutée dès que l'ancienne dépasse 0.\-0 (la nouvelle ligne d'alien est dessinée hors-\/cadre) permet de faire en sorte que les aliens sorte graduellement du haut de l'écran plutôt que d'apparaître d'un coup. La valeur d'index\-\_\-alien est incrémentée à chaque nouvelle ligne pour faire en sorte que la prochain soit du type d'alien qui suit (la valeur revient à 0 au lieu de passer à 5 pour ne pas sortir de la liste d'images). On vérifie également avant tout que la liste d'aliens n'est pas vide pour parer à toutes éventualité. Si cette liste est vide, \char`\"{}y\-\_\-last\-\_\-alien\char`\"{} prend la valeur 14.\-0 car la hauteur des images d'alien est de 36px donc, puisque la nouvelle ligne sera dessiné à l'ordonnée \char`\"{}y\-\_\-last\-\_\-alien\char`\"{}-\/50 (-\/36px dans ce cas), cette nouvelle ligne apparait au joueur immédiatement après la disparition du dernier alien.

Pour chaque bonus affiché, appelle son \hyperlink{class_motor_a5333ff4fde112f55953849964f8ae7fa}{proceed()}, vérifie si une collision a eu lieu avec le joueur (si c'est le cas appelle la méthode active() du bonus et l'enlève de la liste) ou si le bonus n'a pas dépassé le cadre du jeu (l'enlève simplement de la liste dans ce cas).

Pour chaque bonus en activation, ajoute le temps écoulé depuis le dernier appel à cette fonction, et si ce temps dépasse le temps d'activation maximum des bonus, appelle la méthode inactive() de ce bonus et le retire de la liste

Définition à la ligne 161 du fichier Motor.\-java.



Voici le graphe d'appel pour cette fonction \-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_motor_a5333ff4fde112f55953849964f8ae7fa_cgraph}
\end{center}
\end{figure}




Voici le graphe des appelants de cette fonction \-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=266pt]{class_motor_a5333ff4fde112f55953849964f8ae7fa_icgraph}
\end{center}
\end{figure}


\hypertarget{class_motor_a73f2becef3f9ceb3a54b9698e8ef7d05}{\index{Motor@{Motor}!render@{render}}
\index{render@{render}!Motor@{Motor}}
\subsubsection[{render}]{\setlength{\rightskip}{0pt plus 5cm}void Motor.\-render (
\begin{DoxyParamCaption}
\item[{Graphics\-Context}]{gc}
\end{DoxyParamCaption}
)}}\label{class_motor_a73f2becef3f9ceb3a54b9698e8ef7d05}


Methode d'affichage de tout les objets du jeu. 

Un seul appel par frame 
\begin{DoxyItemize}
\item Dessine le fond dans le canvas en recouvrant tout ce qui a été dessiné avant
\item Dessine le vaisseau du joueur à sa position actuelle
\item Dessine chaque bonus à sa positions actuelle
\item Ajoute une brillance qui sera appliqué aux prochains éléments dessinés pour des raison de visibilité
\item Appelle la fonction draw() de chaque missile, qui les dessineront à leurs positions actuelles
\item Appelle la fonction draw() de chaque maison, qui la dessineront dans son état de destruction actuels
\item Change la brillance utilisé par une plus lumineuse (celui par défaut a une puissance de 0.\-3, on le passe à 0.\-5 pour les aliens uniquement)
\item Dessine chaque alien à sa positions actuelle
\item Retire l'effet de brillance du Graphic\-Context pour qu'il ne soit pas appliqué au prochain draw() sur le image qui ne doivent pas en recevoir 
\end{DoxyItemize}

Définition à la ligne 344 du fichier Motor.\-java.



Voici le graphe des appelants de cette fonction \-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=258pt]{class_motor_a73f2becef3f9ceb3a54b9698e8ef7d05_icgraph}
\end{center}
\end{figure}


\hypertarget{class_motor_a6ae139ee985ef74ec9704b895f3b8895}{\index{Motor@{Motor}!start@{start}}
\index{start@{start}!Motor@{Motor}}
\subsubsection[{start}]{\setlength{\rightskip}{0pt plus 5cm}void Motor.\-start (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_motor_a6ae139ee985ef74ec9704b895f3b8895}


Methode de lancement de la Game\-Loop. 



Définition à la ligne 51 du fichier Motor.\-java.

\hypertarget{class_motor_a9a5d81ced7a0f9d679732839a8f77d3a}{\index{Motor@{Motor}!stop@{stop}}
\index{stop@{stop}!Motor@{Motor}}
\subsubsection[{stop}]{\setlength{\rightskip}{0pt plus 5cm}void Motor.\-stop (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_motor_a9a5d81ced7a0f9d679732839a8f77d3a}


Methode d'arrêt de la Game\-Loop. 



Définition à la ligne 58 du fichier Motor.\-java.



Voici le graphe des appelants de cette fonction \-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=250pt]{class_motor_a9a5d81ced7a0f9d679732839a8f77d3a_icgraph}
\end{center}
\end{figure}




La documentation de cette classe a été générée à partir du fichier suivant \-:\begin{DoxyCompactItemize}
\item 
\hyperlink{_motor_8java}{Motor.\-java}\end{DoxyCompactItemize}
